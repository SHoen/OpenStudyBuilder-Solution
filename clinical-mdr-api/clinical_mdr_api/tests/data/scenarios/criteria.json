[
    {
        "name": "Test empty list",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "2",
                "content-type": "application/json"
            },
            "result": []
        }
    },
    {
        "name": "Test adding criteria",
        "request": {
            "headers": {},
            "method": "POST",
            "request": {
                "criteriaData": {
                    "criteriaTemplateUid": "{ctuid}",
                    "libraryName": "Test library",
                    "parameterValues": []
                }
            },
            "url": "/study/study_root/study-criteria/create"
        },
        "response": {
            "code": 201,
            "headers": {
                "content-length": "1132",
                "content-type": "application/json"
            },
            "result": {
                "studyUid": "study_root",
                "keyCriteria": false,
                "order": 1,
                "projectNumber": "123",
                "projectName": "Project ABC",
                "studyCriteriaUid": "StudyCriteria_000001",
                "criteriaType": {
                    "termUid": "C25532",
                    "catalogueName": "SDTM CT",
                    "codelistUid": "CTCodelist_000001",
                    "sponsorPreferredName": "INCLUSION CRITERIA",
                    "sponsorPreferredNameSentenceCase": "Inclusion Criteria",
                    "order": null,
                    "libraryName": "CDISC",
                    "startDate": "2021-10-26T11:40:24.812000",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TODO initials",
                    "possibleActions": [
                        "inactivate",
                        "newVersion"
                    ]
                },
                "criteria": {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T13:45:25.918966",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TEST_USER",
                    "possibleActions": [
                        "inactivate"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": null
                },
                "startDate": "2021-10-26T13:45:26.058572",
                "userInitials": "TEST_USER",
                "latestCriteria": null,
                "acceptedVersion": false
            }
        }
    },
    {
        "name": "Test get-by-name",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/get-by-name/Test_Name_Template"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "416",
                "content-type": "application/json"
            },
            "result": {
                "uid": "Criteria_000001",
                "name": "Test_Name_Template",
                "namePlain": "Test_Name_Template",
                "startDate": "2021-10-26T13:45:25.918966",
                "endDate": null,
                "status": "Final",
                "version": "1.0",
                "changeDescription": "Approved version",
                "userInitials": "TEST_USER",
                "possibleActions": [
                    "inactivate"
                ],
                "criteriaTemplate": {
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "uid": "{ctuid}",
                    "guidanceText": null
                },
                "parameterValues": [],
                "library": {
                    "name": "Test library",
                    "isEditable": true
                },
                "studyCount": null
            },
            "save": {
                "criteriaUid": "uid"
            }
        }
    },
    {
        "name": "Test get all",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "415",
                "content-type": "application/json"
            },
            "result": [
                {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T13:45:25.918966",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TEST_USER",
                    "possibleActions": [
                        "inactivate"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": 1
                }
            ]
        }
    },
    {
        "name": "Test creating the same criteria creates a new selection of same criteria",
        "request": {
            "headers": {},
            "method": "POST",
            "request": {
                "criteriaData": {
                    "criteriaTemplateUid": "{ctuid}",
                    "libraryName": "Test library",
                    "parameterValues": []
                }
            },
            "url": "/study/study_root/study-criteria/create"
        },
        "response": {
            "code": 201,
            "headers": {
                "content-length": "1132",
                "content-type": "application/json"
            },
            "result": {
                "studyUid": "study_root",
                "keyCriteria": false,
                "order": 2,
                "projectNumber": "123",
                "projectName": "Project ABC",
                "studyCriteriaUid": "StudyCriteria_000002",
                "criteriaType": {
                    "termUid": "C25532",
                    "catalogueName": "SDTM CT",
                    "codelistUid": "CTCodelist_000001",
                    "sponsorPreferredName": "INCLUSION CRITERIA",
                    "sponsorPreferredNameSentenceCase": "Inclusion Criteria",
                    "order": null,
                    "libraryName": "CDISC",
                    "startDate": "2021-10-26T11:40:24.812000",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TODO initials",
                    "possibleActions": [
                        "inactivate",
                        "newVersion"
                    ]
                },
                "criteria": {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T13:45:25.918966",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TEST_USER",
                    "possibleActions": [
                        "inactivate"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": null
                },
                "startDate": "2021-10-26T13:49:10.699364",
                "userInitials": "TEST_USER",
                "latestCriteria": null,
                "acceptedVersion": false
            }
        }
    },
    {
        "name": "Test get all still returns a single entry",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "415",
                "content-type": "application/json"
            },
            "result": [
                {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T13:45:25.918966",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TEST_USER",
                    "possibleActions": [
                        "inactivate"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": 1
                }
            ]
        }
    },
    {
        "name": "Test get by uid",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/{criteriaUid}"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "413",
                "content-type": "application/json"
            },
            "result": {
                "uid": "{criteriaUid}",
                "name": "Test_Name_Template",
                "namePlain": "Test_Name_Template",
                "startDate": "2021-10-26T13:45:25.918966",
                "endDate": null,
                "status": "Final",
                "version": "1.0",
                "changeDescription": "Approved version",
                "userInitials": "TEST_USER",
                "possibleActions": [
                    "inactivate"
                ],
                "criteriaTemplate": {
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "uid": "{ctuid}",
                    "guidanceText": null
                },
                "parameterValues": [],
                "library": {
                    "name": "Test library",
                    "isEditable": true
                },
                "studyCount": 1
            }
        }
    },
    {
        "name": "Test get versions",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/{criteriaUid}/versions"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "1126",
                "content-type": "application/json"
            },
            "result": [
                {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T14:50:03.165155",
                    "endDate": null,
                    "status": "Final",
                    "version": "1.0",
                    "changeDescription": "Approved version",
                    "userInitials": "TEST_USER",
                    "possibleActions": [
                        "inactivate"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": 1,
                    "changes": {
                        "uid": false,
                        "name": false,
                        "namePlain": false,
                        "startDate": true,
                        "endDate": true,
                        "status": true,
                        "version": true,
                        "changeDescription": true,
                        "userInitials": true,
                        "possibleActions": true,
                        "criteriaTemplate": false,
                        "parameterValues": false,
                        "library": false,
                        "studyCount": false
                    }
                },
                {
                    "uid": "{criteriaUid}",
                    "name": "Test_Name_Template",
                    "namePlain": "Test_Name_Template",
                    "startDate": "2021-10-26T14:50:02.673373",
                    "endDate": "2021-10-26T14:50:03.165155",
                    "status": "Draft",
                    "version": "0.1",
                    "changeDescription": "Initial version",
                    "userInitials": "TODO Initials",
                    "possibleActions": [
                        "approve",
                        "delete",
                        "edit"
                    ],
                    "criteriaTemplate": {
                        "name": "Test_Name_Template",
                        "namePlain": "Test_Name_Template",
                        "uid": "{ctuid}",
                        "guidanceText": null
                    },
                    "parameterValues": [],
                    "library": {
                        "name": "Test library",
                        "isEditable": true
                    },
                    "studyCount": 1,
                    "changes": {}
                }
            ]
        }
    },
    {
        "name": "Test get studies",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/{criteriaUid}/studies"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "289",
                "content-type": "application/json"
            },
            "result": [
                {
                    "uid": "study_root",
                    "studyNumber": null,
                    "studyId": null,
                    "studyAcronym": null,
                    "projectNumber": null,
                    "studyStatus": null,
                    "currentMetadata": {
                        "identificationMetadata": null,
                        "versionMetadata": null,
                        "highLevelStudyDesign": null,
                        "studyPopulation": null,
                        "studyIntervention": null,
                        "studyDescription": null
                    }
                }
            ]
        }
    },
    {
        "name": "Test get parameters",
        "request": {
            "headers": {},
            "method": "GET",
            "request": {},
            "url": "/criteria/{criteriaUid}/parameters"
        },
        "response": {
            "code": 200,
            "headers": {
                "content-length": "2",
                "content-type": "application/json"
            },
            "result": []
        }
    },
    {
        "name": "Test delete",
        "request": {
            "headers": {},
            "method": "DELETE",
            "request": {},
            "url": "/criteria/{criteriaUid}"
        },
        "response": {
            "code": 400,
            "headers": {
                "content-length": "148",
                "content-type": "application/json"
            },
            "result": {
                "message": "Object has been accepted",
                "time": "2021-10-26T15:18:22.382509",
                "path": "http://testserver/criteria/{criteriaUid}",
                "method": "DELETE",
                "type": "BusinessLogicException"
            }
        }
    }
]